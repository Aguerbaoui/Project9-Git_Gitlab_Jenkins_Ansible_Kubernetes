---
- name: Ansible k8s module
# Creating the namespace in the kubernete cluster
  hosts: servers
# Defining the remote server where the k8 module will manage the objects
  #remote_user: ubuntu   # Using Remote user as ubuntu
  become: true
  tasks:
    - name: "Install kubernetes python package" #This will be installed on the remote host.
      pip:
        name: kubernetes
        state: present
        # Create a test namespace on the cluster without any manifest fies. This is an added advantage on ansible.

    - name: Create a deployment
      k8s:
        state: present            # State=present when you need to create new object
        namespace: Tomcat-namespace  # defining the namespace
        src: /tmp/tomi.yaml  # Source file location
